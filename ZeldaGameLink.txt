Link : GameObject2D
{
	void Initialize()
	{
		SpriteSet = Load<SpriteSet>("link");
		Sprite = SpriteSet["link_down"];
	}
	
	void Update()
	{
		fx12 speed = 96;
		
		Vector2 direction(0, 0);
		
		if (!IsKeyHeld(Keys.All))
		{
			Sprite.SubImageIndex = 0;
		}
		if (IsKeyHeld(Keys.Left) ) 
		{
			direction.x = -1;
			Sprite = SpriteSet["link_left"];
		}
		if (IsKeyHeld(Keys.Right)) 
		{
			direction.x = 1;
			Sprite = SpriteSet["link_right"];
		}
		if (IsKeyHeld(Keys.Up)) 
		{
			direction.y = -1;
			Sprite = SpriteSet["link_up"];
		}
		if (IsKeyHeld(Keys.Down))
		{
			direction.y = 1;
			Sprite = SpriteSet["link_down"];
		}
		
		direction = direction.Normalize();
		x += direction.x * speed * TimeStep;
		y += direction.y * speed * TimeStep;
	}

	void Draw()
	{
		DrawSprite(Sprite, x, y, ImageIndex);
	}
}